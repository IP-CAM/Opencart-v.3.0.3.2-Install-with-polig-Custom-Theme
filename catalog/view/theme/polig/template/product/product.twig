{{ header }}    <section class="products" id="product-product">        <div class="container">            <div class="df">                <div class="menu_search_check"></div>                <ul class="bread_crumbs">                    {% for breadcrumb in breadcrumbs %}                        <li>                            <a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a>                            <img src="{{ theme_url }}/images/arrow.png" alt="" class="arrow">                        </li>                    {% endfor %}                </ul>            </div>            <div class="return_back">                <img src="{{ theme_url }}/images/arrow.png" alt="" class="arrow">                <a href="#">Назад в Каталог</a>            </div>            <div class="prod_df">                <div class="product_images">                    <ul class="thumbnails">                        {% if thumb %}                            <li><a class="thumbnail" href="{{ popup }}" title="{{ heading_title }}">                                    <img class="product_img_dell" src="{{ thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" /></a></li>                        {% endif %}                        {% if images %}                            {% for image in images %}                                <li class="image-additional"><a class="thumbnail" href="{{ image.popup }}" title="{{ heading_title }}"> <img src="{{ image.thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" /></a></li>                            {% endfor %}                        {% endif %}                    </ul>                    </ul>                    </div>                <div class="prod_desc">                    <h2 class="prod_title">                        {{ heading_title }}                    </h2>                    <div class="prod_price"><p><span>Стоимость</span>{{ price }}</p></div>                    <div class="prod_filters">                        <div class="pros_size">Размер <span>{{ rating }}</span></div>                        <div class="prod_color">Цвет</div>                        <div class="prod_presence">{{ text_stock }}<span class="{{ class_stock }}"> {{ stock }}</span></div>                        <div class="prod_desc_text">{{ description }}</div>                    </div>                    <button href="#" class='btn_size open-modal' data-modal="#modal1" class="prod_size_btn">                        Таблица размеров                    </button>                    <div id="product" class="btn_cart">{#                        <label class=   "control-label" for="input-quantity">{{ entry_qty }}</label>#}{#                        <input type="text" name="quantity" value="{{ minimum }}" size="2" id="input-quantity" class="form-control" />#}                        <input type="hidden" name="product_id" value="{{ product_id }}" />                        <br />                        <button type="button" id="button-cart" data-loading-text="{{ text_loading }}" class="btn  btn_basket">Добавить в корзину</button>{#                        <button type="button" id="button-cart" data-loading-text="{{ text_loading }}" class="btn_basket">{{ button_cart }}</button>#}{#                        <button href="#" id="button-cart" class='btn_basket'>#}{#                            Добавить в корзину#}{#                        </button>#}                        <button href="#" class='btn_watch' >                            Смотреть видеообзор                        </button>                    </div>                    <div class='modal' id='modal1'>                        <div class='content'>                            <img src="{{ theme_url }}/images/size.jpg" alt="">                        </div>                    </div>                    <div class='modal' id='modal2'>                        <div class='content'>                            <iframe width="100%" height="100%" src="https://www.youtube.com/embed/6c1BThu95d8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>                        </div>                    </div>                </div>        </div>    </section>    <script type="text/javascript"><!--        $('select[name=\'recurring_id\'], input[name="quantity"]').change(function(){            $.ajax({                url: 'index.php?route=product/product/getRecurringDescription',                type: 'post',                data: $('input[name=\'product_id\'], input[name=\'quantity\'], select[name=\'recurring_id\']'),                dataType: 'json',                beforeSend: function() {                    $('#recurring-description').html('');                },                success: function(json) {                    $('.alert-dismissible, .text-danger').remove();                    if (json['success']) {                        $('#recurring-description').html(json['success']);                    }                }            });        });        //--></script>    <script type="text/javascript"><!--        $('#button-cart').on('click', function() {            console.log('click');            $.ajax({                url: 'index.php?route=checkout/cart/add',                type: 'post',                data: $('#product input[type=\'text\'], #product input[type=\'hidden\'], #product input[type=\'radio\']:checked, #product input[type=\'checkbox\']:checked, #product select, #product textarea'),                dataType: 'json',                beforeSend: function() {                    $('#button-cart').button('loading');                },                complete: function() {                    $('#button-cart').button('reset');                },                success: function(json) {                    $('.alert-dismissible, .text-danger').remove();                    $('.form-group').removeClass('has-error');                    if (json['error']) {                        if (json['error']['option']) {                            for (i in json['error']['option']) {                                var element = $('#input-option' + i.replace('_', '-'));                                if (element.parent().hasClass('input-group')) {                                    element.parent().after('<div class="text-danger">' + json['error']['option'][i] + '</div>');                                } else {                                    element.after('<div class="text-danger">' + json['error']['option'][i] + '</div>');                                }                            }                        }                        if (json['error']['recurring']) {                            $('select[name=\'recurring_id\']').after('<div class="text-danger">' + json['error']['recurring'] + '</div>');                        }                        // Highlight any found errors                        // alert('not_add');                        $('.text-danger').parent().addClass('has-error');                    }                    if (json['success']) {                        $('.breadcrumb').after('<div class="alert alert-success alert-dismissible">' + json['success'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');                        $('#cart > button').html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> ' + json['total'] + '</span>');                        // $('html, body').animate({ scrollTop: 0 }, 'slow');// alert('add');                        $('#cart > ul').load('index.php?route=common/cart/info ul li');                    }                },                error: function(xhr, ajaxOptions, thrownError) {                    alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);                }            });        });        //--></script>    <script type="text/javascript"><!--        $('.date').datetimepicker({            language: '{{ datepicker }}',            pickTime: false        });        $('.datetime').datetimepicker({            language: '{{ datepicker }}',            pickDate: true,            pickTime: true        });        $('.time').datetimepicker({            language: '{{ datepicker }}',            pickDate: false        });        $('button[id^=\'button-upload\']').on('click', function() {            var node = this;            $('#form-upload').remove();            $('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');            $('#form-upload input[name=\'file\']').trigger('click');            if (typeof timer != 'undefined') {                clearInterval(timer);            }            timer = setInterval(function() {                if ($('#form-upload input[name=\'file\']').val() != '') {                    clearInterval(timer);                    $.ajax({                        url: 'index.php?route=tool/upload',                        type: 'post',                        dataType: 'json',                        data: new FormData($('#form-upload')[0]),                        cache: false,                        contentType: false,                        processData: false,                        beforeSend: function() {                            $(node).button('loading');                        },                        complete: function() {                            $(node).button('reset');                        },                        success: function(json) {                            $('.text-danger').remove();                            if (json['error']) {                                $(node).parent().find('input').after('<div class="text-danger">' + json['error'] + '</div>');                            }                            if (json['success']) {                                alert(json['success']);                                $(node).parent().find('input').val(json['code']);                            }                        },                        error: function(xhr, ajaxOptions, thrownError) {                            alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);                        }                    });                }            }, 500);        });        //--></script>    <script type="text/javascript"><!--        $('#review').delegate('.pagination a', 'click', function(e) {            e.preventDefault();            $('#review').fadeOut('slow');            $('#review').load(this.href);            $('#review').fadeIn('slow');        });        $('#review').load('index.php?route=product/product/review&product_id={{ product_id }}');        $('#button-review').on('click', function() {            $.ajax({                url: 'index.php?route=product/product/write&product_id={{ product_id }}',                type: 'post',                dataType: 'json',                data: $("#form-review").serialize(),                beforeSend: function() {                    $('#button-review').button('loading');                },                complete: function() {                    $('#button-review').button('reset');                },                success: function(json) {                    $('.alert-dismissible').remove();                    if (json['error']) {                        $('#review').after('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> ' + json['error'] + '</div>');                    }                    if (json['success']) {                        $('#review').after('<div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> ' + json['success'] + '</div>');                        $('input[name=\'name\']').val('');                        $('textarea[name=\'text\']').val('');                        $('input[name=\'rating\']:checked').prop('checked', false);                    }                }            });        });        // $(document).ready(function() {        //     $('.thumbnails').magnificPopup({        //         type:'image',        //         delegate: 'a',        //         gallery: {        //             enabled: true        //         }        //     });        // });        //--></script>    {{ footer }}